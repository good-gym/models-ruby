<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: OpenActive::Rpde::RpdeBody
  
    &mdash; Documentation by YARD 0.9.20
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "OpenActive::Rpde::RpdeBody";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (R)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span>
     &raquo; 
    <span class="title">RpdeBody</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: OpenActive::Rpde::RpdeBody
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../BaseModel.html" title="OpenActive::BaseModel (class)">BaseModel</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="../BaseModel.html" title="OpenActive::BaseModel (class)">BaseModel</a></span></li>
          
            <li class="next">OpenActive::Rpde::RpdeBody</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/openactive/rpde/rpde_body.rb</dd>
  </dl>
  
</div>





  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#items-instance_method" title="#items (instance method)">#<strong>items</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute items.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#license-instance_method" title="#license (instance method)">#<strong>license</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute license.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#next-instance_method" title="#next (instance method)">#<strong>next</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute next.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create-class_method" title="create (class method)">.<strong>create</strong>(feed_base_url:, modified: nil, id: nil, change_number: nil, items:)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create an RpdeBody object from a given feed base URL, an array of RpdeItem, and either a modified int, and id, or a change_number.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_from_modified_id-class_method" title="create_from_modified_id (class method)">.<strong>create_from_modified_id</strong>(feed_base_url, modified, id, items)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create an RpdeBody object from a given feed base URL, a modified int, an id, and an array of RpdeItem.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_from_next_change_number-class_method" title="create_from_next_change_number (class method)">.<strong>create_from_next_change_number</strong>(feed_base_url, change_number, items)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create an RpdeBody object from a given feed base URL, a change number int, and an array of RpdeItem.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../BaseModel.html" title="OpenActive::BaseModel (class)">BaseModel</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../BaseModel.html#assign_attributes-instance_method" title="OpenActive::BaseModel#assign_attributes (method)">#assign_attributes</a></span>, <span class='object_link'><a href="../BaseModel.html#define_property-class_method" title="OpenActive::BaseModel.define_property (method)">define_property</a></span>, <span class='object_link'><a href="../BaseModel.html#deserialize-instance_method" title="OpenActive::BaseModel#deserialize (method)">#deserialize</a></span>, <span class='object_link'><a href="../BaseModel.html#deserialize-class_method" title="OpenActive::BaseModel.deserialize (method)">deserialize</a></span>, <span class='object_link'><a href="../BaseModel.html#deserialize_value-instance_method" title="OpenActive::BaseModel#deserialize_value (method)">#deserialize_value</a></span>, <span class='object_link'><a href="../BaseModel.html#initialize-instance_method" title="OpenActive::BaseModel#initialize (method)">#initialize</a></span>, <span class='object_link'><a href="../BaseModel.html#serialize-class_method" title="OpenActive::BaseModel.serialize (method)">serialize</a></span>, <span class='object_link'><a href="../BaseModel.html#serialize-instance_method" title="OpenActive::BaseModel#serialize (method)">#serialize</a></span>, <span class='object_link'><a href="../BaseModel.html#set_property-instance_method" title="OpenActive::BaseModel#set_property (method)">#set_property</a></span>, <span class='object_link'><a href="../BaseModel.html#to_json-instance_method" title="OpenActive::BaseModel#to_json (method)">#to_json</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Concerns/TypeChecker.html" title="OpenActive::Concerns::TypeChecker (module)">Concerns::TypeChecker</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Concerns/TypeChecker.html#check_types-instance_method" title="OpenActive::Concerns::TypeChecker#check_types (method)">#check_types</a></span>, <span class='object_link'><a href="../Concerns/TypeChecker.html#included-class_method" title="OpenActive::Concerns::TypeChecker.included (method)">included</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Concerns/JsonLdSerializable.html" title="OpenActive::Concerns::JsonLdSerializable (module)">Concerns::JsonLdSerializable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Concerns/JsonLdSerializable.html#included-class_method" title="OpenActive::Concerns::JsonLdSerializable.included (method)">included</a></span>, <span class='object_link'><a href="../Concerns/JsonLdSerializable.html#to_h-instance_method" title="OpenActive::Concerns::JsonLdSerializable#to_h (method)">#to_h</a></span>, <span class='object_link'><a href="../Concerns/JsonLdSerializable.html#values-instance_method" title="OpenActive::Concerns::JsonLdSerializable#values (method)">#values</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <p class="notice">This class inherits a constructor from <span class='object_link'><a href="../BaseModel.html#initialize-instance_method" title="OpenActive::BaseModel#initialize (method)">OpenActive::BaseModel</a></span></p>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="items=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="items-instance_method">
  
    #<strong>items</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute items</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


5
6
7</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openactive/rpde/rpde_body.rb', line 5</span>

<span class='kw'>def</span> <span class='id identifier rubyid_items'>items</span>
  <span class='ivar'>@items</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="license=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="license-instance_method">
  
    #<strong>license</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute license</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


6
7
8</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openactive/rpde/rpde_body.rb', line 6</span>

<span class='kw'>def</span> <span class='id identifier rubyid_license'>license</span>
  <span class='ivar'>@license</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="next=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="next-instance_method">
  
    #<strong>next</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute next</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


4
5
6</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openactive/rpde/rpde_body.rb', line 4</span>

<span class='kw'>def</span> <span class='kw'>next</span>
  <span class='ivar'>@next</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create-class_method">
  
    .<strong>create</strong>(feed_base_url:, modified: nil, id: nil, change_number: nil, items:)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create an RpdeBody object from a given feed base URL, an array of RpdeItem, and either a modified int, and id, or a change_number. Checks are performed to see if the provided “modified” and “id” attributes are valid.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the options to create a message with.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    
    
    
    

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>self</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Exceptions/FirstTimeAfterTimestampAndAfterIdException.html" title="OpenActive::Rpde::Exceptions::FirstTimeAfterTimestampAndAfterIdException (class)">::OpenActive::Rpde::Exceptions::FirstTimeAfterTimestampAndAfterIdException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the afterId and afterTimestamp provided are of the first item in the feed</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Exceptions/DeletedItemsDataException.html" title="OpenActive::Rpde::Exceptions::DeletedItemsDataException (class)">::OpenActive::Rpde::Exceptions::DeletedItemsDataException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If any deleted items provided (if any) contain data</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Exceptions/IncompleteItemsDataException.html" title="OpenActive::Rpde::Exceptions::IncompleteItemsDataException (class)">::OpenActive::Rpde::Exceptions::IncompleteItemsDataException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If any RPDE feed item does not include id, modified, state, or kind.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Exceptions/ModifiedIdItemsOrderException.html" title="OpenActive::Rpde::Exceptions::ModifiedIdItemsOrderException (class)">::OpenActive::Rpde::Exceptions::ModifiedIdItemsOrderException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the feed items are not in “modified”, then “id”, order.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Exceptions/InvalidArgumentException.html" title="OpenActive::Exceptions::InvalidArgumentException (class)">::OpenActive::Exceptions::InvalidArgumentException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the provided argument is not of a supported type.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25
26
27
28
29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openactive/rpde/rpde_body.rb', line 23</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='label'>feed_base_url:</span><span class='comma'>,</span> <span class='label'>modified:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>change_number:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>items:</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_modified'>modified</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_change_number'>change_number</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_create_from_modified_id'>create_from_modified_id</span><span class='lparen'>(</span><span class='id identifier rubyid_feed_base_url'>feed_base_url</span><span class='comma'>,</span> <span class='id identifier rubyid_modified'>modified</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_modified'>modified</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_change_number'>change_number</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_create_from_next_change_number'>create_from_next_change_number</span><span class='lparen'>(</span><span class='id identifier rubyid_feed_base_url'>feed_base_url</span><span class='comma'>,</span> <span class='id identifier rubyid_change_number'>change_number</span><span class='comma'>,</span> <span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_from_modified_id-class_method">
  
    .<strong>create_from_modified_id</strong>(feed_base_url, modified, id, items)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create an RpdeBody object from a given feed base URL, a modified int, an id, and an array of RpdeItem. Checks are performed to see if the provided “modified” and “id” attributes are valid.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>feed_base_url</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>modified</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>int</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Integer</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>items</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="RpdeItem.html" title="OpenActive::Rpde::RpdeItem (class)">::OpenActive::Rpde::RpdeItem</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>self</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Exceptions/FirstTimeAfterTimestampAndAfterIdException.html" title="OpenActive::Rpde::Exceptions::FirstTimeAfterTimestampAndAfterIdException (class)">::OpenActive::Rpde::Exceptions::FirstTimeAfterTimestampAndAfterIdException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the afterId and afterTimestamp provided are of the first item in the feed</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Exceptions/DeletedItemsDataException.html" title="OpenActive::Rpde::Exceptions::DeletedItemsDataException (class)">::OpenActive::Rpde::Exceptions::DeletedItemsDataException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If any deleted items provided (if any) contain data</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Exceptions/IncompleteItemsDataException.html" title="OpenActive::Rpde::Exceptions::IncompleteItemsDataException (class)">::OpenActive::Rpde::Exceptions::IncompleteItemsDataException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If any RPDE feed item does not include id, modified, state, or kind.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Exceptions/ModifiedIdItemsOrderException.html" title="OpenActive::Rpde::Exceptions::ModifiedIdItemsOrderException (class)">::OpenActive::Rpde::Exceptions::ModifiedIdItemsOrderException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the feed items are not in “modified”, then “id”, order.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Exceptions/InvalidArgumentException.html" title="OpenActive::Exceptions::InvalidArgumentException (class)">::OpenActive::Exceptions::InvalidArgumentException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the provided argument is not of a supported type.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openactive/rpde/rpde_body.rb', line 48</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_create_from_modified_id'>create_from_modified_id</span><span class='lparen'>(</span><span class='id identifier rubyid_feed_base_url'>feed_base_url</span><span class='comma'>,</span> <span class='id identifier rubyid_modified'>modified</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_rpde_body'>rpde_body</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='label'>items:</span> <span class='id identifier rubyid_items'>items</span>
  <span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id identifier rubyid_first_item'>first_item</span> <span class='op'>=</span> <span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

    <span class='comment'># Checks that the afterId and afterTimestamp provided are not the
</span>    <span class='comment'># first item in the feed (helps detect whether query is correct)
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_first_item'>first_item</span><span class='period'>.</span><span class='id identifier rubyid_modified'>modified</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_modified'>modified</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_first_item'>first_item</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Exceptions.html" title="OpenActive::Rpde::Exceptions (module)">Exceptions</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Exceptions/FirstTimeAfterTimestampAndAfterIdException.html" title="OpenActive::Rpde::Exceptions::FirstTimeAfterTimestampAndAfterIdException (class)">FirstTimeAfterTimestampAndAfterIdException</a></span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_current_modified'>current_modified</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
    <span class='id identifier rubyid_current_id'>current_id</span> <span class='op'>=</span> <span class='id identifier rubyid_first_item'>first_item</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
    <span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="RpdeState.html" title="OpenActive::Rpde::RpdeState (class)">RpdeState</a></span></span><span class='op'>::</span><span class='const'>DELETED</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span> <span class='op'>!=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Exceptions.html" title="OpenActive::Rpde::Exceptions (module)">Exceptions</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Exceptions/DeletedItemsDataException.html" title="OpenActive::Rpde::Exceptions::DeletedItemsDataException (class)">DeletedItemsDataException</a></span></span>
      <span class='kw'>end</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_modified'>modified</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Exceptions.html" title="OpenActive::Rpde::Exceptions (module)">Exceptions</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Exceptions/IncompleteItemsDataException.html" title="OpenActive::Rpde::Exceptions::IncompleteItemsDataException (class)">IncompleteItemsDataException</a></span></span>
      <span class='kw'>end</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_modified'>modified</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_current_modified'>current_modified</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_modified'>modified</span> <span class='op'>==</span> <span class='id identifier rubyid_current_modified'>current_modified</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_current_id'>current_id</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_current_modified'>current_modified</span> <span class='op'>=</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_modified'>modified</span>
        <span class='id identifier rubyid_current_id'>current_id</span> <span class='op'>=</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Exceptions.html" title="OpenActive::Rpde::Exceptions (module)">Exceptions</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Exceptions/ModifiedIdItemsOrderException.html" title="OpenActive::Rpde::Exceptions::ModifiedIdItemsOrderException (class)">ModifiedIdItemsOrderException</a></span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='comment'># Create &#39;next&#39; URL depending on whether there are items available
</span>    <span class='id identifier rubyid_rpde_body'>rpde_body</span><span class='period'>.</span><span class='id identifier rubyid_next'>next</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_feed_base_url'>feed_base_url</span><span class='embexpr_end'>}</span><span class='tstring_content'>?afterTimestamp=</span><span class='embexpr_beg'>#{</span><span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_modified'>modified</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;afterId=</span><span class='embexpr_beg'>#{</span><span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_modified'>modified</span> <span class='op'>!=</span> <span class='kw'>nil</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_id'>id</span> <span class='op'>!=</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_rpde_body'>rpde_body</span><span class='period'>.</span><span class='id identifier rubyid_next'>next</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_feed_base_url'>feed_base_url</span><span class='embexpr_end'>}</span><span class='tstring_content'>?afterTimestamp=</span><span class='embexpr_beg'>#{</span><span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_modified'>modified</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;afterId=</span><span class='embexpr_beg'>#{</span><span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_rpde_body'>rpde_body</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_from_next_change_number-class_method">
  
    .<strong>create_from_next_change_number</strong>(feed_base_url, change_number, items)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create an RpdeBody object from a given feed base URL, a change number int, and an array of RpdeItem. Checks are performed to see if the provided “changeNumber” attribute is valid.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>feed_base_url</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>change_number</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>items</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="RpdeItem.html" title="OpenActive::Rpde::RpdeItem (class)">::OpenActive::Rpde::RpdeItem</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>self</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Exceptions/FirstTimeAfterTimestampAndAfterIdException.html" title="OpenActive::Rpde::Exceptions::FirstTimeAfterTimestampAndAfterIdException (class)">::OpenActive::Rpde::Exceptions::FirstTimeAfterTimestampAndAfterIdException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the afterId and afterTimestamp provided are of the first item in the feed</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Exceptions/DeletedItemsDataException.html" title="OpenActive::Rpde::Exceptions::DeletedItemsDataException (class)">::OpenActive::Rpde::Exceptions::DeletedItemsDataException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If any deleted items provided (if any) contain data</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Exceptions/IncompleteItemsDataException.html" title="OpenActive::Rpde::Exceptions::IncompleteItemsDataException (class)">::OpenActive::Rpde::Exceptions::IncompleteItemsDataException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If any RPDE feed item does not include id, modified, state, or kind.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Exceptions/ModifiedIdItemsOrderException.html" title="OpenActive::Rpde::Exceptions::ModifiedIdItemsOrderException (class)">::OpenActive::Rpde::Exceptions::ModifiedIdItemsOrderException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the feed items are not in “modified”, then “id”, order.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Exceptions/InvalidArgumentException.html" title="OpenActive::Exceptions::InvalidArgumentException (class)">::OpenActive::Exceptions::InvalidArgumentException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the provided argument is not of a supported type.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openactive/rpde/rpde_body.rb', line 103</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_create_from_next_change_number'>create_from_next_change_number</span><span class='lparen'>(</span><span class='id identifier rubyid_feed_base_url'>feed_base_url</span><span class='comma'>,</span> <span class='id identifier rubyid_change_number'>change_number</span><span class='comma'>,</span> <span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_rpde_body'>rpde_body</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='label'>items:</span> <span class='id identifier rubyid_items'>items</span>
  <span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id identifier rubyid_first_item'>first_item</span> <span class='op'>=</span> <span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

    <span class='comment'># Checks that the afterId and afterTimestamp provided are not the
</span>    <span class='comment'># first item in the feed (helps detect whether query is correct)
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_first_item'>first_item</span><span class='period'>.</span><span class='id identifier rubyid_modified'>modified</span> <span class='op'>==</span> <span class='id identifier rubyid_change_number'>change_number</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Exceptions.html" title="OpenActive::Rpde::Exceptions (module)">Exceptions</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Exceptions/FirstTimeAfterChangeNumberException.html" title="OpenActive::Rpde::Exceptions::FirstTimeAfterChangeNumberException (class)">FirstTimeAfterChangeNumberException</a></span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_current_change_number'>current_change_number</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
    <span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="RpdeState.html" title="OpenActive::Rpde::RpdeState (class)">RpdeState</a></span></span><span class='op'>::</span><span class='const'>DELETED</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span> <span class='op'>!=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Exceptions.html" title="OpenActive::Rpde::Exceptions (module)">Exceptions</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Exceptions/DeletedItemsDataException.html" title="OpenActive::Rpde::Exceptions::DeletedItemsDataException (class)">DeletedItemsDataException</a></span></span>
      <span class='kw'>end</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_modified'>modified</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Exceptions.html" title="OpenActive::Rpde::Exceptions (module)">Exceptions</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Exceptions/IncompleteItemsDataException.html" title="OpenActive::Rpde::Exceptions::IncompleteItemsDataException (class)">IncompleteItemsDataException</a></span></span>
      <span class='kw'>end</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_modified'>modified</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_current_change_number'>current_change_number</span>
        <span class='id identifier rubyid_current_change_number'>current_change_number</span> <span class='op'>=</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_modified'>modified</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Exceptions.html" title="OpenActive::Rpde::Exceptions (module)">Exceptions</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Exceptions/NextChangeNumbersItemsOrderException.html" title="OpenActive::Rpde::Exceptions::NextChangeNumbersItemsOrderException (class)">NextChangeNumbersItemsOrderException</a></span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='comment'># Create &#39;next&#39; URL depending on whether there are items available
</span>    <span class='id identifier rubyid_rpde_body'>rpde_body</span><span class='period'>.</span><span class='id identifier rubyid_next'>next</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_feed_base_url'>feed_base_url</span><span class='embexpr_end'>}</span><span class='tstring_content'>?afterChangeNumber=</span><span class='embexpr_beg'>#{</span><span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_modified'>modified</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_change_number'>change_number</span> <span class='op'>!=</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_rpde_body'>rpde_body</span><span class='period'>.</span><span class='id identifier rubyid_next'>next</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_feed_base_url'>feed_base_url</span><span class='embexpr_end'>}</span><span class='tstring_content'>?afterChangeNumber=</span><span class='embexpr_beg'>#{</span><span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_change_number'>change_number</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_rpde_body'>rpde_body</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Nov 28 15:50:58 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.20 (ruby-2.6.3).
</div>

    </div>
  </body>
</html>