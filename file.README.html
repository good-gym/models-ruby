<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.20
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-openactive+gem+-+Ruby+implementation+of+OpenActive-27s+data+model">openactive gem - Ruby implementation of OpenActive&#39;s data model</h1>

<p>Ruby Models for the OpenActive Opportunity and Booking Specifications</p>

<p>OpenActive aims to provide model files for all classes defined in its Opportunity and Booking specifications across the PHP, Ruby, and .NET languages. This repository is intended for the Ruby files; see also the <a href="https://github.com/openactive/models-php">PHP</a> and <a href="https://github.com/openactive/OpenActive.NET">.NET</a> implementations.</p>

<h2 id="label-Installation">Installation</h2>

<p>Add this line to your application&#39;s Gemfile:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>openactive</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>And then execute:</p>

<pre class="code ruby"><code class="ruby">$ bundle
</code></pre>

<p>Or install it yourself as:</p>

<pre class="code ruby"><code class="ruby">$ gem install openactive
</code></pre>

<h2 id="label-Usage">Usage</h2>

<p>TODO: Write usage instructions here</p>

<h3 id="label-Models">Models</h3>

<p>OpenActive includes OpenActive.io objects as objects for use in Ruby. All classes can be serialized into JSON-LD, to provide easy conformance with the <a href="https://www.openactive.io/modelling-opportunity-data/">Modelling Specification</a> and <a href="https://www.openactive.io/open-booking-api/">Open Booking API Specification</a>.</p>

<h3 id="label-OpenActive">OpenActive</h3>

<p>Classes for all OpenActive classes are available in the <code>OpenActive::Models</code> and <code>OpenActive::Enums</code> namespaces, and can be easily serialized to JSON-LD, as follows. Enumerations are available as <code>enum</code>s for properties that require their use.</p>

<pre class="code ruby"><code class="ruby">event = OpenActive::Models::Event.new(
    name: &quot;Virtual BODYPUMP&quot;,
    event_status: OpenActive::Enums::Schema::EventStatusType::EventScheduled
};
json_ld = event.to_json
</code></pre>

<p>Value of <code>jsonLd</code>: <code>JSON {   &quot;@context&quot;: &quot;https://openactive.io/&quot;,   &quot;@type&quot;: &quot;Event&quot;,   &quot;name&quot;: &quot;Virtual BODYPUMP&quot;,   &quot;eventStatus&quot;: &quot;https://schema.org/EventScheduled&quot; } </code></p>

<h3 id="label-Schema">Schema</h3>

<p>The OpenActive data model builds on top of Schema.org, which means that you are free to use additional schema.org properties within OpenActive published data.</p>

<p>To reflect this, OpenActive uses inheritance to build ontop of a copy of Schema.org, these are available within the OpenActive::Models::Schema and OpenActive::Enums::Schema namespaces. And so makes it easy to use additional properties from schema.org on any given type.</p>

<h2 id="label-RPDE+Feed+Publishing">RPDE Feed Publishing</h2>

<p>To publish an OpenActive data feed (see this <a href="https://developer.openactive.io/publishing-data/data-feeds/how-a-data-feed-works">video explainer</a>), The OpenActive gem provides a drop-in solution to render the feed pages. This also includes validation for the underlying feed query.</p>

<h3 id="label-Modified+Timestamp+and+ID+Ordering+Strategy">Modified Timestamp and ID Ordering Strategy</h3>

<p><code>OpenActive::Rpde::RpdeBody.create_from_modified_id(feedBaseUrl, afterTimestamp, afterId, items)</code></p>

<p>Creates a new RPDE Page based on the RPDE Items provided using the <a href="https://www.w3.org/2017/08/realtime-paged-data-exchange/#modified-timestamp-and-id">Modified Timestamp and ID Ordering Strategy</a>, given the <code>afterTimestamp</code> and <code>afterId</code> parameters of the current query. Also validates that the items are in the correct order, throwing a <code>SerializationException</code> if this is not the case.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_items'>items</span> <span class='op'>=</span> <span class='lbracket'>[</span>
    <span class='const'><span class='object_link'><a href="OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde/RpdeItem.html" title="OpenActive::Rpde::RpdeItem (class)">RpdeItem</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenActive/BaseModel.html#initialize-instance_method" title="OpenActive::BaseModel#initialize (method)">new</a></span></span><span class='lparen'>(</span>
        <span class='label'>Id:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='label'>Modified:</span> <span class='int'>3</span><span class='comma'>,</span>
        <span class='label'>State:</span> <span class='const'><span class='object_link'><a href="OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde/RpdeState.html" title="OpenActive::Rpde::RpdeState (class)">RpdeState</a></span></span><span class='op'>::</span><span class='const'>Updated</span><span class='comma'>,</span>
        <span class='label'>Kind:</span> <span class='const'><span class='object_link'><a href="OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde/RpdeKind.html" title="OpenActive::Rpde::RpdeKind (class)">RpdeKind</a></span></span><span class='op'>::</span><span class='const'>SessionSeries</span><span class='comma'>,</span>
        <span class='label'>Data:</span> <span class='ivar'>@event</span>
    <span class='rparen'>)</span><span class='comma'>,</span>
    <span class='const'><span class='object_link'><a href="OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde/RpdeItem.html" title="OpenActive::Rpde::RpdeItem (class)">RpdeItem</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenActive/BaseModel.html#initialize-instance_method" title="OpenActive::BaseModel#initialize (method)">new</a></span></span><span class='lparen'>(</span>
        <span class='label'>Id:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='label'>Modified:</span> <span class='int'>4</span><span class='comma'>,</span>
        <span class='label'>State:</span> <span class='const'><span class='object_link'><a href="OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde/RpdeState.html" title="OpenActive::Rpde::RpdeState (class)">RpdeState</a></span></span><span class='op'>::</span><span class='const'>Deleted</span><span class='comma'>,</span>
        <span class='label'>Kind:</span> <span class='const'><span class='object_link'><a href="OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde/RpdeKind.html" title="OpenActive::Rpde::RpdeKind (class)">RpdeKind</a></span></span><span class='op'>::</span><span class='const'>SessionSeries</span><span class='comma'>,</span>
        <span class='label'>Data:</span> <span class='kw'>nil</span>
    <span class='rparen'>)</span>
<span class='rbracket'>]</span>

<span class='id identifier rubyid_json_ld'>json_ld</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde/RpdeBody.html" title="OpenActive::Rpde::RpdeBody (class)">RpdeBody</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenActive/BaseModel.html#initialize-instance_method" title="OpenActive::BaseModel#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://www.example.com/feed</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_json'><span class='object_link'><a href="OpenActive/BaseModel.html#to_json-instance_method" title="OpenActive::BaseModel#to_json (method)">to_json</a></span></span>
</code></pre>

<h3 id="label-Incrementing+Unique+Change+Number+Ordering+Strategy">Incrementing Unique Change Number Ordering Strategy</h3>

<p><code>OpenActive::Rpde::RpdeBody.create_from_next_change_number(feedBaseUrl, afterChangeNumber, items)</code></p>

<p>Creates a new RPDE Page based on the RPDE Items provided using the <a href="https://www.w3.org/2017/08/realtime-paged-data-exchange/#incrementing-unique-change-number">Incrementing Unique Change Number Ordering Strategy</a>, given the <code>afterChangeNumber</code> parameter of the current query. Also validates that the items are in the correct order, throwing a <code>SerializationException</code> if this is not the case.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_items'>items</span> <span class='op'>=</span> <span class='lbracket'>[</span>
    <span class='const'><span class='object_link'><a href="OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde/RpdeItem.html" title="OpenActive::Rpde::RpdeItem (class)">RpdeItem</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenActive/BaseModel.html#initialize-instance_method" title="OpenActive::BaseModel#initialize (method)">new</a></span></span><span class='lparen'>(</span>
        <span class='label'>Id:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='label'>Modified:</span> <span class='int'>3</span><span class='comma'>,</span>
        <span class='label'>State:</span> <span class='const'><span class='object_link'><a href="OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde/RpdeState.html" title="OpenActive::Rpde::RpdeState (class)">RpdeState</a></span></span><span class='op'>::</span><span class='const'>Updated</span><span class='comma'>,</span>
        <span class='label'>Kind:</span> <span class='const'><span class='object_link'><a href="OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde/RpdeKind.html" title="OpenActive::Rpde::RpdeKind (class)">RpdeKind</a></span></span><span class='op'>::</span><span class='const'>SessionSeries</span><span class='comma'>,</span>
        <span class='label'>Data:</span> <span class='ivar'>@event</span>
    <span class='rparen'>)</span><span class='comma'>,</span>
    <span class='const'><span class='object_link'><a href="OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde/RpdeItem.html" title="OpenActive::Rpde::RpdeItem (class)">RpdeItem</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenActive/BaseModel.html#initialize-instance_method" title="OpenActive::BaseModel#initialize (method)">new</a></span></span><span class='lparen'>(</span>
        <span class='label'>Id:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='label'>Modified:</span> <span class='int'>4</span><span class='comma'>,</span>
        <span class='label'>State:</span> <span class='const'><span class='object_link'><a href="OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde/RpdeState.html" title="OpenActive::Rpde::RpdeState (class)">RpdeState</a></span></span><span class='op'>::</span><span class='const'>Deleted</span><span class='comma'>,</span>
        <span class='label'>Kind:</span> <span class='const'><span class='object_link'><a href="OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde/RpdeKind.html" title="OpenActive::Rpde::RpdeKind (class)">RpdeKind</a></span></span><span class='op'>::</span><span class='const'>SessionSeries</span><span class='comma'>,</span>
        <span class='label'>Data:</span> <span class='kw'>nil</span>
    <span class='rparen'>)</span>
<span class='rbracket'>]</span>

<span class='id identifier rubyid_json_Ld'>json_Ld</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenActive.html" title="OpenActive (module)">OpenActive</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde.html" title="OpenActive::Rpde (module)">Rpde</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenActive/Rpde/RpdeBody.html" title="OpenActive::Rpde::RpdeBody (class)">RpdeBody</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create_from_next_change_number'><span class='object_link'><a href="OpenActive/Rpde/RpdeBody.html#create_from_next_change_number-class_method" title="OpenActive::Rpde::RpdeBody.create_from_next_change_number (method)">create_from_next_change_number</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://www.example.com/feed</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span>
</code></pre>

<h2 id="label-Development">Development</h2>

<p>After checking out the repo, run <code>bin/setup</code> to install dependencies. Then, run <code>rake spec</code> to run the tests. You can also run <code>bin/console</code> for an interactive prompt that will allow you to experiment.</p>

<p>To install this gem onto your local machine, run <code>bundle exec rake install</code>. To release a new version, update the version number in <code>version.rb</code>, and then run <code>bundle exec rake release</code>, which will create a git tag for the version, push git commits and tags, and push the <code>.gem</code> file to <a href="https://rubygems.org">rubygems.org</a>.</p>

<h2 id="label-Contributing">Contributing</h2>

<p>Bug reports and pull requests are welcome on GitHub at <a href="https://github.com/openactive/models-ruby">github.com/openactive/models-ruby</a>.</p>
</div></div>

      <div id="footer">
  Generated on Thu Nov 28 15:56:58 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.20 (ruby-2.6.3).
</div>

    </div>
  </body>
</html>